# Лабораторная работа №4

## Отчет
[Отчет в Google Documents]() (пока не готов)

## Тема - Динамические  библиотеки

## Цель работы
Целью является приобретение практических навыков в:
+ Создании динамических библиотек
+ Создании программ, которые используют функции динамических библиотек

## Вариант задания

***Task 21:***
| Номер задачи | Описание | Сигнатура | Реализация 1 | Реализация 2 |
|--------------|----------|-----------|--------------|--------------|
|3|Подсчет простых чисел на отрезке [A, B]|`int PrimeCount(int A, int B)`|Наивный алгоритм (делимость текущего числа на все предыдущие)|Решето Эратосфена|
|9|Отсортировать целочисленный массив|`int *Sort(int *array, int size)`|Пузырьковая сортировка|Сортировка Хоара|

Требуется создать динамические библиотеки, которые реализуют определенный функционал. Далее использовать данные библиотеки 2-мя способами:
1. Во время компиляции (на этапе «линковки»/linking)
2. Во время исполнения программы. Библиотеки загружаются в память с помощью интерфейса ОС для работы с динамическими библиотеками

В конечном итоге, в лабораторной работе необходимо получить следующие части:
+	Динамические библиотеки, реализующие контракты, которые заданы вариантом;
+	Тестовая программа (программа №1), которая используют одну из библиотек, используя знания полученные на этапе компиляции;
+   Тестовая программа (программа №2), которая загружает библиотеки, используя только их местоположение и контракты.

Провести анализ двух типов использования библиотек.

Пользовательский ввод для обоих программ должен быть организован следующим образом:
1.	Если пользователь вводит команду «0», то программа переключает одну реализацию контрактов на другую (необходимо только для программы №2). Можно реализовать лабораторную работу без данной функции, но максимальная оценка в этом случае будет «хорошо»;
2.	«1 arg1 arg2 … argN», где после «1» идут аргументы для первой функции, предусмотренной контрактами. После ввода команды происходит вызов первой функции, и на экране появляется результат её выполнения;
3.	«2 arg1 arg2 … argM», где после «2» идут аргументы для второй функции, предусмотренной контрактами. После ввода команды происходит вызов второй функции, и на экране появляется результат её выполнения.

## Как запустить? 

***linking.c***
```shell
gcc -o linking linking.c lib1/lib1.c -lm
./linking
```
***runtime.c***

```shell
# lab4/programs/lib1 !!!
gcc -c -fPIC lib1.c
gcc -shared lib1.o -o lib1.so -lm
# lab4/programs/lib2 !!!
gcc -c -fPIC lib2.c
gcc -shared lib2.o -o lib2.so -lm
# lab4/programs
gcc runtime.c -o runtime
./runtime
```